{% extends "base.html" %}
{% block content %}
<h3 class="mb-4">ğŸ“‚ ê°•ì˜ìë£Œ ì—…ë¡œë“œ</h3>

<form method="POST" enctype="multipart/form-data">
  <div class="mb-3">
    <label class="form-label">ìë£Œ ì œëª©</label>
    <input type="text" name="title" class="form-control" required>
  </div>

  <div class="mb-3">
    <label class="form-label">ë‚´ìš©</label>
    <textarea name="content" class="form-control" required></textarea>
  </div>

  <div class="mb-3">
    <label class="form-label">íŒŒì¼ ì„ íƒ</label>
    <input type="file" name="files" multiple class="form-control">
  </div>

  <div id="link-section" class="mb-3">
    <label class="form-label">ê´€ë ¨ ë§í¬</label>
    <input type="url" name="link1" class="form-control mb-2" placeholder="https://...">
  </div>

  <button type="button" class="btn btn-outline-secondary btn-sm" onclick="addLink()">+ ì¶”ê°€</button>
  <button type="button" class="btn btn-outline-danger btn-sm" onclick="removeLink()">- ì‚­ì œ</button>
  <button type="submit" class="btn btn-success w-100 mt-3">ì—…ë¡œë“œ</button>
</form>

<hr>

<h4 class="mt-4">ğŸ“š ì—…ë¡œë“œëœ ê°•ì˜ìë£Œ</h4>
{% for lecture in lectures %}
<div class="card mb-3">
  <div class="card-body">
    <h5>{{ lecture.title }}</h5>
    <p>{{ lecture.content }}</p>
    {% if lecture.files %}
      {% for f in lecture.files.split(";") %}
        <a href="{{ url_for('uploaded_file', filename=f) }}" target="_blank" class="d-block text-decoration-none">ğŸ“ {{ f }}</a>
      {% endfor %}
    {% endif %}
    {% if lecture.links %}
      {% for l in lecture.links.split(";") %}
        <a href="{{ l }}" target="_blank" class="d-block">ğŸ”— {{ l }}</a>
      {% endfor %}
    {% endif %}
    <p class="text-muted small mt-2">ì—…ë¡œë“œ: {{ lecture.date }}</p>
  </div>
</div>
{% endfor %}

<script>
let linkCount = 1;
function addLink() {
  linkCount++;
  const div = document.createElement('div');
  div.innerHTML = `<input type="url" name="link${linkCount}" class="form-control mb-2" placeholder="https://...">`;
  document.getElementById('link-section').appendChild(div);
}
function removeLink() {
  const section = document.getElementById('link-section');
  if (section.children.length > 1) {
    section.removeChild(section.lastElementChild);
    linkCount--;
  }
}
</script>
{% endblock %}




