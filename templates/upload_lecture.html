{% extends "base.html" %}
{% block content %}
<h3 class="fw-bold mb-3">ğŸ“˜ ê°•ì˜ìë£Œ ì—…ë¡œë“œ</h3>

<form method="POST" enctype="multipart/form-data">
  <input type="text" name="title" class="form-control mb-2" placeholder="ìë£Œ ì œëª©" required>
  <textarea name="content" class="form-control mb-2" rows="2" placeholder="ë‚´ìš© ì…ë ¥" required></textarea>
  <input type="file" name="file" class="form-control mb-2">
  <div id="siteInputs">
    <input type="text" name="site_link" class="form-control mb-1" placeholder="https://...">
  </div>
  <button type="button" class="btn btn-outline-primary btn-sm" onclick="addSiteInput()">ï¼‹ ì¶”ê°€</button>
  <button type="button" class="btn btn-outline-danger btn-sm" onclick="removeSiteInput()">ï¼ ì‚­ì œ</button>
  <button type="submit" class="btn btn-success w-100 mt-3">ğŸ“¤ ì—…ë¡œë“œ</button>
</form>

<hr>
<h4>ğŸ“š ì—…ë¡œë“œëœ ìë£Œ</h4>
{% for lec in lectures %}
<div class="border rounded p-3 mb-3">
  <h5>{{ lec.title }}</h5>
  <p>{{ lec.content }}</p>
  {% if lec.file_name %}
  <a href="{{ url_for('download', filename=lec.file_name) }}">ğŸ“¥ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</a><br>
  {% endif %}
  {% if lec.site_links %}<small>ğŸ”— {{ lec.site_links }}</small>{% endif %}
  <form method="POST" action="{{ url_for('delete_lecture', title=lec.title) }}">
    <button type="submit" class="btn btn-sm btn-danger mt-2">ğŸ—‘ï¸ ì‚­ì œ</button>
  </form>
</div>
{% endfor %}

<script>
function addSiteInput(){
  const div=document.createElement('div');
  div.innerHTML='<input type="text" name="site_link" class="form-control mb-1" placeholder="https://...">';
  document.getElementById('siteInputs').appendChild(div);
}
function removeSiteInput(){
  const div=document.getElementById('siteInputs');
  if(div.children.length>1) div.removeChild(div.lastChild);
}
</script>
{% endblock %}


