
{% extends "base.html" %}
{% block content %}
<h2>ğŸ“˜ ê°•ì˜ìë£Œ & Q&A</h2>

<!-- í•™ìƒ ì§ˆë¬¸ ë“±ë¡ -->
<form method="POST" action="/lecture" class="mt-3 mb-4">
  <label>ğŸ’¬ ì§ˆë¬¸ ë“±ë¡:</label><br>
  <textarea name="question" rows="3" style="width:70%; padding:5px;" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
  <input type="text" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸(ìˆ˜ì •Â·ì‚­ì œìš©)" style="width:20%; padding:5px;">
  <button type="submit" class="btn btn-sm btn-primary">ë“±ë¡</button>
</form>

<!-- í•™ìƒ ì§ˆë¬¸ ëª©ë¡ -->
<h5>ğŸ§‘â€ğŸ“ í•™ìƒ ì§ˆë¬¸ ëª©ë¡</h5>
<table class="table table-bordered table-sm">
  <thead class="table-light">
    <tr><th>ë²ˆí˜¸</th><th>ì§ˆë¬¸</th><th>ì‘ì„±ì‹œê°</th><th>ê´€ë¦¬</th></tr>
  </thead>
  <tbody>
    {% for row in qdata %}
    <tr>
      <td>{{ row["ë²ˆí˜¸"] }}</td>
      <td>{{ row["ì§ˆë¬¸"] }}</td>
      <td>{{ row["ì‘ì„±ì‹œê°"] }}</td>
      <td>
        <form method="POST" action="/edit_question/{{ loop.index0 }}" style="display:inline;">
          <input type="password" name="pw" placeholder="ë¹„ë²ˆ" style="width:70px;">
          <input type="text" name="new_text" placeholder="ìˆ˜ì •ë‚´ìš©" style="width:120px;">
          <button class="btn btn-outline-success btn-sm">ìˆ˜ì •</button>
        </form>
        <form method="POST" action="/delete_question/{{ loop.index0 }}" style="display:inline;">
          <input type="password" name="pw" placeholder="ë¹„ë²ˆ" style="width:70px;">
          <button class="btn btn-outline-danger btn-sm">ì‚­ì œ</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<hr>
<h5>ğŸ“š ì—…ë¡œë“œëœ ê°•ì˜ìë£Œ</h5>
<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>ë²ˆí˜¸</th><th>ë‚´ìš©</th><th>ìë£ŒíŒŒì¼</th><th>ì—°ê´€ì‚¬ì´íŠ¸</th><th>ë¹„ê³ </th>
      {% if session.get('role') == 'professor' %}<th>ì—…ë¡œë“œì‹œê°</th>{% endif %}
    </tr>
  </thead>
  <tbody>
    {% for row in data %}
    <tr>
      <td>{{ row["ë²ˆí˜¸"] }}</td>
      <td>{{ row["ë‚´ìš©"] }}</td>
      <td>
        {% for file in row["ìë£ŒíŒŒì¼"].split(";") %}
          {% if file %}
          <a href="/download/{{ file.strip() }}" target="_blank">{{ file.strip() }}</a><br>
          {% endif %}
        {% endfor %}
      </td>
      <td>{{ row["ì—°ê´€ì‚¬ì´íŠ¸"] }}</td>
      <td>{{ row["ë¹„ê³ "] }}</td>
      {% if session.get('role') == 'professor' %}
      <td>{{ row["ì—…ë¡œë“œì‹œê°"] }}</td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
