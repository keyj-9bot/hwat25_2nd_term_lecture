{% extends "base.html" %}
{% block content %}
<h3 class="mb-4">📘 학습 사이트</h3>

<!-- 질문 등록 -->
<form method="POST" class="mb-4">
  <input type="text" name="title" class="form-control mb-2" placeholder="질문 제목" required>
  <textarea name="content" class="form-control mb-2" placeholder="질문 내용" required></textarea>
  <button type="submit" class="btn btn-success">질문 등록</button>
</form>

<hr>

<!-- 질문 목록 -->
{% for q in questions %}
<div class="card mb-3">
  <div class="card-body">
    <h5>{{ q.title }}</h5>
    <p>{{ q.content }}</p>
    <small>작성자: {{ q.email }} | {{ q.date }}</small>

    {% if is_prof %}
    <a href="{{ url_for('delete_question', question_id=q.id) }}" class="btn btn-danger btn-sm float-end ms-2">질문삭제</a>
    {% endif %}

    <hr>
    <h6>💬 댓글</h6>

    {% for c in comments %}
      {% if c.question_id == q.id %}
        <div class="ms-3 mb-2">
          <p>{{ c.comment }}</p>
          <small>작성자: {{ c.email }} | {{ c.date }}</small>
          {% if is_prof %}
          <a href="{{ url_for('delete_comment', comment_index=loop.index0) }}" class="btn btn-outline-danger btn-sm ms-2">댓글삭제</a>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}

    <form method="POST" action="{{ url_for('add_comment', question_id=q.id) }}" class="mt-2">
      <input type="text" name="comment" class="form-control mb-2" placeholder="댓글 입력" required>
      <button type="submit" class="btn btn-outline-primary btn-sm">댓글 등록</button>
    </form>
  </div>
</div>
{% endfor %}
{% endblock %}




