{% extends "base.html" %}
{% block content %}
<h2>📘 강의자료 & Q&A</h2>

<!-- 학생 질문 등록 -->
<form method="POST" action="/lecture" class="mt-3 mb-4">
  <input type="text" name="question" placeholder="질문을 입력하세요" required style="width:60%; padding:5px;">
  <input type="password" name="password" placeholder="비밀번호(수정·삭제용)" required style="width:25%; padding:5px;">
  <button type="submit" class="btn btn-primary">등록</button>
</form>

<!-- 질문 목록 -->
<h4>💬 학생 질문 목록</h4>
<table border="1" cellpadding="5" cellspacing="0">
  <tr><th>번호</th><th>질문</th><th>작성시각</th><th>관리</th></tr>
  {% for q in questions %}
  <tr>
    <td>{{ q["번호"] }}</td>
    <td>{{ q["질문"] }}</td>
    <td>{{ q["작성시각"] }}</td>
    <td>
      <form method="POST" action="/edit_question/{{ loop.index0 }}" style="display:inline;">
        <input type="password" name="password" placeholder="비번" required>
        <input type="text" name="new_text" placeholder="수정내용" required>
        <button type="submit" class="btn btn-success btn-sm">수정</button>
      </form>
      <form method="POST" action="/delete_question/{{ loop.index0 }}" style="display:inline;">
        <input type="password" name="password" placeholder="비번" required>
        <button type="submit" class="btn btn-danger btn-sm">삭제</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>

<hr>

<h4>📚 업로드된 강의자료</h4>
<table border="1" cellpadding="5" cellspacing="0">
  <tr><th>번호</th><th>내용</th><th>자료파일</th><th>연관사이트</th><th>비고</th><th>업로드시각</th></tr>
  {% for row in lectures %}
  <tr>
    <td>{{ row["번호"] }}</td>
    <td>{{ row["내용"] }}</td>
    <td>{{ row["자료파일"] }}</td>
    <td>{{ row["연관사이트"] }}</td>
    <td>{{ row["비고"] }}</td>
    <td>{{ row["업로드시각"] }}</td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
