{% extends "base.html" %}
{% block content %}
<h2>📘 강의자료 & Q&A</h2>

<!-- 학생 질문 등록 -->
<form method="POST" action="/lecture" class="mt-3 mb-4">
  <label>💬 질문 등록:</label><br>
  <input type="text" name="question" placeholder="질문을 입력하세요" required style="width:60%; padding:5px;">
  <input type="password" name="password" placeholder="비밀번호 (삭제·수정용)" style="width:20%; padding:5px;">
  <button type="submit">등록</button>
</form>

<!-- 등록된 질문 목록 -->
<h4>🧩 학생 질문 목록</h4>
<table border="1" cellpadding="5" cellspacing="0" style="margin-bottom:20px;">
  <tr><th>번호</th><th>질문</th><th>작성시각</th><th>관리</th></tr>
  {% for q in questions %}
  <tr>
    <td>{{ q["번호"] }}</td>
    <td>{{ q["질문"] }}</td>
    <td>{{ q["작성시각"] }}</td>
    <td>
      <!-- 수정 -->
      <form method="GET" action="{{ url_for('edit_question', index=loop.index0) }}" style="display:inline;">
        <button type="submit">수정</button>
      </form>
      <!-- 삭제 -->
      <form method="POST" action="{{ url_for('delete_question', index=loop.index0) }}" style="display:inline;">
        <input type="password" name="password" placeholder="비번" style="width:70px;">
        <button type="submit">삭제</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>

<!-- 강의자료 목록 -->
<h4>📚 업로드된 강의자료</h4>
<table border="1" cellpadding="5" cellspacing="0">
  <tr>
    <th>번호</th>
    <th>내용</th>
    <th>자료파일</th>
    <th>연관사이트</th>
    <th>비고</th>
    <th>업로드시각</th>
  </tr>
  {% for row in data %}
  <tr>
    <td>{{ row["번호"] }}</td>
    <td>{{ row["내용"] }}</td>
    <td>{{ row["자료파일"] }}</td>
    <td>{{ row["연관사이트"] }}</td>
    <td>{{ row["비고"] }}</td>
    <td>{{ row["업로드시각"] }}</td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
