{% extends "base.html" %}
{% block content %}

<h3 class="fw-bold mb-4">📘 강의자료 목록</h3>

{% if lectures %}
<table class="table table-bordered align-middle text-center">
  <thead class="table-primary">
    <tr>
      <th>제목</th>
      <th>내용</th>
      <th>파일</th>
      <th>사이트</th>
      <th>업로드시각</th>
    </tr>
  </thead>
  <tbody>
    {% for lec in lectures %}
    <tr>
      <td>{{ lec.title }}</td>
      <td>{{ lec.content }}</td>
      <td>
        {% if lec.file_link %}
          <a href="{{ lec.file_link }}" target="_blank">📂</a>
        {% endif %}
      </td>
      <td>
        {% if lec.site_link %}
          <a href="{{ lec.site_link }}" target="_blank">🌐</a>
        {% endif %}
      </td>
      {% if session.get('professor') %}
        <td>{{ lec.uploaded_at }}</td>
      {% else %}
        <td>비공개</td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p class="text-muted">등록된 강의자료가 없습니다.</p>
{% endif %}

<hr class="my-4">
<h4>💬 질문 등록</h4>

<form method="POST" action="{{ url_for('lecture') }}">
  <div class="mb-3">
    <textarea name="question" class="form-control" rows="3" placeholder="질문을 입력하세요." required></textarea>
  </div>
  <div class="mb-3">
    <input type="password" name="password" class="form-control" placeholder="비밀번호 (수정·삭제용)" required>
  </div>
  <button type="submit" class="btn btn-success w-100">질문 등록</button>
</form>

<hr class="my-4">
<h4>🗒️ 질문 목록</h4>

{% if questions %}
<ul class="list-group">
  {% for q in questions %}
  <li class="list-group-item">
    <strong>{{ q.email }}</strong> ({{ q.created_at }})<br>
    {{ q.question }}
  </li>
  {% endfor %}
</ul>
{% else %}
<p class="text-muted">아직 질문이 없습니다.</p>
{% endif %}

{% endblock %}
